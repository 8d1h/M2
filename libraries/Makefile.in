VPATH = @srcdir@
include ../include/config.Makefile
all check reconfigure untar fetch distclean clean: Makefile.library
#
BUILT_TARGETS = untar fetch all check reconfigure
ALL_TARGETS = $(BUILT_TARGETS) clean distclean
define do-dir
.PHONY:$1-$2
$1-$2:
	$$(MAKE) -C $1 $2
endef
$(foreach lib,@LIBLIST@ libtool M2,$(foreach target, $(ALL_TARGETS),$(eval $(call do-dir,$(lib),$(target)))))
$(foreach lib,@LIBRARIES@,$(foreach target, $(BUILT_TARGETS),$(eval $(target): $(lib)-$(target))))
$(foreach lib,@LIBLIST@  ,$(foreach target, distclean clean,$(eval $(target): $(lib)-$(target))))
ifeq (@SHARED@,yes)
all:install-shared
install-shared:
	: installing sharable library files in @pre_librariesdir@/lib
	if [ -d final/lib ] ; \
	then rm -rf @pre_librariesdir@/lib ;\
	     @INSTALL@ -d @pre_librariesdir@/lib ; \
	     @TAR@ cf - --exclude="*.a" --exclude="*.la" --exclude="*.pc" --exclude="*.old" -C final/lib . \
	     | @TAR@ xfv - -C @pre_librariesdir@/lib ; \
	fi
endif
Makefile         : Makefile.in         ; cd .. && ./config.status libraries/Makefile
Makefile.library : Makefile.library.in ; cd .. && ./config.status libraries/Makefile.library
clean:; rm -rf final
distclean:clean ; rm -f Makefile
# Local Variables:
# compile-command: "make -C $M2BUILDDIR/libraries "
# End:
