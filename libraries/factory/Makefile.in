# VERSION = 3.0.2
# PATCHFILE = @abs_srcdir@/patch-$(VERSION)
# TARDIR = factory

VERSION = 3.0.4
TARDIR = factory

VERSION = 3.1.0
PATCHFILE = @abs_srcdir@/patch-3.1.0b
TARDIR = factory

TARFILE := factory-$(shell echo $(VERSION) | sed 's/\./-/g').tar.gz
URL = ftp://www.mathematik.uni-kl.de/pub/Math/Singular/Factory
PRECONFIGURE = autoconf
# this doesn't work, because autoheader fails with factory
# PRECONFIGURE = autoreconf -vi
CONFIGOPTIONS += --enable-NTL
ifeq (@OPTIMIZE@,yes)
CXXFLAGS += -Wno-deprecated --no-rtti --no-exceptions
endif
ifeq (@DEBUG@,yes)
CONFIGOPTIONS += --enable-assertions
endif
CHECKCMD = :
include ../Makefile.library
Makefile: @srcdir@/Makefile.in ; cd ../.. && ./config.status libraries/factory/Makefile
# HINT:
# Under freebsd there is a problem in the file /usr/include/c++/3.4/cwchar .
# You have to bracket the following include with extern "C" like this:
#    extern "C" {
#      #include <wchar.h>
#    }

uninstall clean ::
	if [ -d $(LIBRARIESDIR) ] ;\
	then cd $(LIBRARIESDIR) && rm -rf \
		include/factory.h include/factoryconf.h include/cf_gmp.h include/templates/ftmpl_* \
		lib/libcf.a lib/libcfmem.a ;\
	fi

# Local Variables:
# compile-command: "make -C $M2BUILDDIR/libraries/factory "
# End:
