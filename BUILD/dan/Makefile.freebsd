#-*- Makefile -*-

# build instructions under freebsd 7.1-RELEASE

# to see what's there:
#   ftp ftp.freebsd.org
#   cd pub/FreeBSD/ports/i386/packages-7.1-release/Latest


# start with the developer's freebsd, X11 not needed,
# with a 4GB disk, of which 3GB will be used

# use pkg_add -r to install the following packages:
# 
# required to build:
#   autoconf262
#   m4 (fetched by autoconf)
#   curl or wget
#   gmake
#   gtar
#   g95
#   libgmp (fetched by mpfr)
#   mpfr
#   gdbm
#   lapack (fetches blas, also)
#   ntl
#   boehm-gc -- in 7.1-RELEASE, too old, only version 6.8
#   gfind
# 
# optional but useful:
#   subversion
#   emacs
#   xauth
#   epkg
#   bash
#   gcc44 -- to update the compiler, version 4.2.1 is standard in 7.1-RELEASE
# 
# VirtualBox settings:
#  VBoxManage setextradata "Linux Guest" VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/Protocol  TCP
#  VBoxManage setextradata "Linux Guest" VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/GuestPort 22
#  VBoxManage setextradata "Linux Guest" VBoxInternal/Devices/pcnet/0/LUN#0/Config/guestssh/HostPort  2222

#BUILDOPTIONS += RemakeAllDocumentation=true RemakePackages=true
#BUILDOPTIONS += RerunExamples=true
#PACKAGES = Macaulay2Doc
#BUILDOPTIONS += -s
#INSTALLOPTIONS += -s
CONFIGOPTIONS += --enable-freebsd CPPFLAGS="-I/usr/local/include" LDFLAGS="-L/usr/local/lib"

# I put these two options together just in case the common staging area is
# is used with one of our other ports that has --mandir at the default value:
CONFIGOPTIONS += --disable-common-staging-area --mandir='$${prefix}/man'
# The other freebsd ports all put man pages in /usr/local/man

INSTALLOPTIONS += prefix=/usr/local/encap
DIRECTORY = freebsd
include Makefile.include
pre-install:;	rm -rf /usr/local/encap/Macaulay2-$(PACKAGE_VERSION)
arch-chk:
	[ `hostname` = freebsd.gallium ]
	[ `uname -m` = i386 ]
# Local Variables:
# compile-command: "time gmake -f Makefile.freebsd "
# End:
