# @configure_input@
include ../../include/config.Makefile
VPATH = @srcdir@

# export LD_LIBRARY_PATH=../lib

TESTRESULTS := $(notdir $(patsubst %.m2, %.okay, $(wildcard @srcdir@/*.m2)))

.PHONY : all clean distclean install check default

all check:: $(TESTRESULTS)

distclean :: clean

$(TESTRESULTS) : ../bin/Macaulay2

%.okay : %.m2
	@ echo testing $<
	@ env ../bin/Macaulay2 --silent --stop --no-loaddata --no-setup '-e srcdir = "@srcdir@/"' $< '-e exit 0'
	@ touch $@

clean  :	
	rm -f *.okay

LDLIBS += -lgc
all:: testgc
	./testgc

Makefile : Makefile.in ; cd ../.. && ./config.status Macaulay2/basictests/Makefile
distclean ::; rm -f Makefile

