TOPDIR = ../../..
include $(TOPDIR)/Makeconf

TESTFILES := $(wildcard *.m2)
TESTRESULTS := $(patsubst %.m2, %.okay, $(TESTFILES))
all:: $(TESTRESULTS)
$(TESTRESULTS) : ../../cache/Macaulay2-$(ARCH).data

%.okay : %.m2
	@ echo testing $<
	@ ../../bin/Macaulay2 '-eloaddata("../../cache/Macaulay2-$(ARCH).data")' -- '-epath=append(path,"..")' '-erunStartFunctions()' '-eerrorDepth(0)' -silent $< '-eexit(0)'
	@ touch $@
