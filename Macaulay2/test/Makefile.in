# @configure_input@
include ../../include/config.Makefile
VPATH = @srcdir@
RESULTS := $(notdir $(patsubst %.m2, %.okay, $(wildcard @srcdir@/*.m2)))
ifneq "$(DUMPDATA)" "no"
RESULTS := $(RESULTS) dumpdata.okay
endif

LATERESULTS := missingDoc.okay

all :: $(RESULTS)

$(RESULTS) : ../bin/Macaulay2
$(LATERESULTS) : ../bin/Macaulay2 ../cache/Macaulay2-doc ../cache/Macaulay2-made

ARGS := -q '-epath=append(path,"@srcdir@/../packages/")' '-eerrorDepth(0)' --silent

%.okay : %.m2
	@ echo testing $<
	@ ulimit -t 600; time env M2HOME=@srcdir@/.. ../bin/Macaulay2 $(ARGS) $< '-eexit(0)'
	@ touch $@

clean  :	
	rm -f *.okay

distclean: clean
	rm -f Makefile

docStructure.out : docStructure.m2
