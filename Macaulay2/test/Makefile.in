# @configure_input@
include ../../include/config.Makefile
VPATH = @srcdir@
RESULTS := $(notdir $(patsubst %.m2, %.okay, $(wildcard @srcdir@/*.m2)))
ifneq "$(DUMPDATA)" "no"
RESULTS := $(RESULTS) dumpdata.okay
endif

LATERESULTS := missingDoc.okay

all :: $(RESULTS)

$(RESULTS) : ../bin/M2
$(LATERESULTS) : ../bin/M2 ../cache/Macaulay2-doc ../cache/Macaulay2-made

ARGS := -q -e 'path=append(path,"@srcdir@/../packages/")' -e 'errorDepth(0)' --silent

%.okay : %.m2
	@ echo testing $<
	@ ulimit -t 600; time ../bin/M2 $(ARGS) $< -e 'exit(0)'
	@ touch $@

clean  :	
	rm -f *.okay

distclean: clean
	rm -f Makefile

docStructure.out : docStructure.m2
