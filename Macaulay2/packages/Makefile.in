# @configure_input@
include ../../include/config.Makefile
VPATH = @srcdir@

## here is the list of those package files to install with Macaulay2
PACKAGES = Macaulay2
PACKAGES += Style
PACKAGES += PrimaryDecomposition
PACKAGES += CacheFileName
PACKAGES += ConvexHulls
PACKAGES += Dmodules
PACKAGES += Elimination
PACKAGES += FirstPackage
PACKAGES += GenericInitialIdeal
PACKAGES += Markov
PACKAGES += minimal
# PACKAGES += SchurRings
##

REMAKE = false

all ::
	for i in $(PACKAGES) ; do \
	    ( set -x ; \
	      ../bin/M2 \
		-q \
		--stop \
		--prefix $(encapdir) \
		-e errorDepth=0 \
		-e "installPackage(\"$$i\", Encapsulate => false, RemakeAllDocumentation => $(REMAKE), MakeInfo => true, PackagePrefix => \"$(encapdir)/\")" \
		-e "exit 0" ) || break ; \
	done

clean::; rm -rf tmp *.installed

Dmodules.installed :: @srcdir@/Dmodules/*.m2

# ./tmp is used by examples in CacheFileName.m2
CacheFileName.installed : tmp
tmp : ; mkdir tmp

clean check distclean ::; $(MAKE) -C ComputationsBook $@
Makefile: Makefile.in; cd ../..; ./config.status Macaulay2/packages/Makefile
distclean::clean
distclean::; rm -f Makefile

# Local Variables:
# compile-command: "make -C $M2BUILDDIR/Macaulay2/packages "
# End:
