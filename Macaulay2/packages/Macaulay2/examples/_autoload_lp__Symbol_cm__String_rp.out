-- -*- M2-comint -*-

i1 : fn = temporaryFileName()

o1 = /tmp/M2-4365-1

i2 : fn << "f = x -> x+1\n" << close

o2 = /tmp/M2-4365-1

o2 : File

i3 : autoload(f,fn)

i4 : code f

o4 = -- ../../../../Macaulay2/m2/autoload.m2:5-11
          sym <- f := x -> (
               load filename;
               if f === value sym 
               then error("symbol '", toString sym, "' didn't acquire a new value in file '", filename, "'");
               (value sym) x
               );
          )
     | symbol   class            value           location of symbol                            
     | ------   -----            -----           ------------------
     | sym     :Symbol         --f               ../../../../Macaulay2/m2/autoload.m2:3:28-3:28
     | filename:String         --"/tmp/M2-4365-1"../../../../Macaulay2/m2/autoload.m2:3:32-3:32
     | f       :FunctionClosure--...             ../../../../Macaulay2/m2/autoload.m2:5:12-5:12

i5 : f 4
--warning: f redefined

o5 = 5

i6 : removeFile fn

i7 : 
